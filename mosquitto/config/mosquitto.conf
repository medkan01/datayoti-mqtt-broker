# Configuration Mosquitto pour DataYoti IoT
# Optimisée pour Raspberry Pi 2

# =============================================================================
# Paramètres généraux
# =============================================================================

# Fichiers de log
log_dest file /mosquitto/log/mosquitto.log
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true

# =============================================================================
# Sécurité et authentification
# =============================================================================

# Activation de l'authentification
allow_anonymous false
password_file /mosquitto/passwords/passwd

# =============================================================================
# Listeners et ports
# =============================================================================

# Port MQTT standard
listener 1883
protocol mqtt

# Port WebSocket (optionnel pour interfaces web)
listener 9001
protocol websockets

# =============================================================================
# Optimisations pour Raspberry Pi 2
# =============================================================================

# Limites de connexions (adapté pour RPi 2)
max_connections 50
max_inflight_messages 40
max_queued_messages 1000

# Limites de message
max_packet_size 8192

# =============================================================================
# ACL (Access Control List) - Optionnel
# =============================================================================

# Décommentez les lignes suivantes pour activer les ACL
# acl_file /mosquitto/config/acl.conf

# =============================================================================
# Topics pour DataYoti
# =============================================================================

# Les ESP32 publieront sur :
# - sensors/temperature-humidity
# - sensors/status
# - sensors/heartbeat

# Pattern recommandé :
# datayoti/{site_id}/{device_id}/{sensor_type}